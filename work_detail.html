<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì‘ì—… ìƒì„¸ | ìœ¤ì„ ì˜ YOON SUNYOUNG</title>

<!-- ì›¹í°íŠ¸ -->
<link rel="stylesheet" href="/fonts/SUIT-Variable-woff2/SUIT-Variable.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Gowun+Batang:wght@400;700&display=swap" rel="stylesheet">

<!-- ìŠ¤íƒ€ì¼ì‹œíŠ¸ -->
<link rel="stylesheet" href="/style.css">
</head>
<body>

<header>
  <div class="logo">
    <div class="kr">ìœ¤ì„ ì˜</div>
    <div class="en"><p>YOON</p><p>SUNYOUNG</p></div>
  </div>
  <nav>
    <button class="menu-toggle" aria-label="ë©”ë‰´ ì—´ê¸°">â˜°</button>
    <ul class="menu">
      <li class="close-menu">Ã—</li>
      <li><a href="index.html">ì²« í™”ë©´</a></li>
      <li><a href="news.html">ì†Œì‹</a></li>
      <li><a href="work.html">ì‘ì—…</a></li>
      <li><a href="about.html">ì†Œê°œ</a></li>
      <li class="lang"><a href="#" id="lang-switch" class="lang-switch"><img src="images/icon_globe.png" alt="Language" class="icon">English</a></li>
    </ul>
  </nav>
</header>

<main class="work-content">
  <p class="work-categories" id="work-category">ì¹´í…Œê³ ë¦¬</p>
  <h1 class="work-title" id="work-title">ì‘ì—… ì œëª©</h1>
  <div id="work-thumbnail" style="margin:2em 0;">
    <img id="thumbnail-img" src="" alt="ì‘ì—… ì¸ë„¤ì¼" style="width:100%; height:auto; max-height:80vh; object-fit:cover;">
  </div>

  <div id="work-detail-content"></div>

  <div class="news-nav">
    <a href="work.html">ğŸ¡¸ ì‘ì—… ëª©ë¡ìœ¼ë¡œ</a>
  </div>
</main>

<footer>
  <p>&copy; ìœ¤ì„ ì˜ YOON SUNYOUNG</p>
</footer>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const params = new URLSearchParams(window.location.search);
  const workId = parseInt(params.get("id"), 10);

  const titleEl = document.getElementById("work-title");
  const catEl = document.getElementById("work-category");
  const contentEl = document.getElementById("work-detail-content");

  fetch("work.json")
    .then(res => res.json())
    .then(data => {
      const item = data.find(w => w.id === workId);
      if (!item) {
        titleEl.textContent = "í•´ë‹¹ ì‘ì—…ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
        return;
      }

      titleEl.textContent = item.title;
      catEl.textContent = item.category;

      const thumbnailEl = document.getElementById("thumbnail-img");
      thumbnailEl.src = item.thumbnail;
      thumbnailEl.alt = item.title;

      // ë‚´ìš© êµ¬ì„±
      let html = "";
      if (item.content["ì†Œê°œ"] && item.content["ì†Œê°œ"]) {
        html += `<h2>ì†Œê°œ</h2><p>${item.content["ì†Œê°œ"]}</p>`;
      }
      if (item.content["ì •ë³´"] && item.content["ì •ë³´"]) {
        html += `<h2>ì •ë³´</h2><p>${item.content["ì •ë³´"]}</p>`;
      }
      if (item.content["ìˆ˜ìƒ"] && item.content["ìˆ˜ìƒ"]) {
        html += `<h2>ìˆ˜ìƒ</h2><p>${item.content["ìˆ˜ìƒ"]}</p>`;
      }
      if (item.content["ì–¸ë¡  ë³´ë„"] && item.content["ì–¸ë¡  ë³´ë„"]) {
        html += `<h2>ì–¸ë¡  ë³´ë„</h2><p>${item.content["ì–¸ë¡  ë³´ë„"]}</p>`;
      }

      if (Array.isArray(item.content["ë¯¸ë””ì–´"]) && item.content["ë¯¸ë””ì–´"].length > 0 && item.content["ë¯¸ë””ì–´"][0]) {
        item.content["ë¯¸ë””ì–´"].forEach(media => {
          if(media.type === "image"){
            html += `<figure>
                       <img src="${media.src}" alt="${media.alt}" style="max-width:100%; margin:4em 0 0 0;">
                       ${media.caption ? `<figcaption style="text-align:center; font-size:0.9em; color:#666;">${media.caption}</figcaption>` : ""}
                     </figure>`;
          } else if(media.type === "youtube"){
            html += `<figure style="margin:4em 0 0 0;">
                       <div style="position:relative; padding-bottom:56.25%; height:0; overflow:hidden;">
                         <iframe src="${media.src}" frameborder="0" allowfullscreen
                         style="position:absolute; top:0; left:0; width:100%; height:100%;"></iframe>
                       </div>
                       ${media.caption ? `<figcaption style="text-align:center; font-size:0.9em; color:#666; margin-top:0.5em;">${media.caption}</figcaption>` : ""}
                     </figure>`;
          }
        });
      }

      contentEl.innerHTML = html;
    })
    .catch(err => {
      console.error("ì‘ì—… ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", err);
      titleEl.textContent = "ì‘ì—… ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
    });

  // ëª¨ë°”ì¼ ë©”ë‰´
  const menuToggle = document.querySelector('.menu-toggle');
  const menu = document.querySelector('.menu');
  const closeMenuBtn = document.querySelector('.close-menu');

  menuToggle.addEventListener('click', ()=>menu.classList.toggle('active'));
  closeMenuBtn.addEventListener('click', ()=>menu.classList.remove('active'));
  document.addEventListener('click', e=>{
    const isClickInside = menu.contains(e.target) || menuToggle.contains(e.target);
    if(!isClickInside && menu.classList.contains('active')) menu.classList.remove('active');
  });
  // ------------------------------
  // ì–¸ì–´ ì „í™˜ ë²„íŠ¼ ì²˜ë¦¬
  // ------------------------------
  const langSwitchBtns = document.querySelectorAll('.lang-switch');

  langSwitchBtns.forEach(btn => {
    btn.addEventListener('click', e => {
      e.preventDefault();

      const path = window.location.pathname;  // í˜„ì¬ ê²½ë¡œ
      const search = window.location.search;  // ì¿¼ë¦¬ìŠ¤íŠ¸ë§ ?id=13 ë“±
      const fileName = path.split('/').pop(); // index.html, about.html ë“±

      let targetPath = '';

      // í˜„ì¬ í˜ì´ì§€ê°€ ì˜ì–´(/en/)ì¸ì§€ í™•ì¸
      if (path.includes('/en/')) {
        // ì˜ì–´ â†’ í•œêµ­ì–´: í•œ ë‹¨ê³„ ìœ„ë¡œ ì´ë™
        targetPath = '../' + fileName;
      } else {
        // í•œêµ­ì–´ â†’ ì˜ì–´: en/ í´ë” ì•„ë˜ë¡œ ì´ë™
        targetPath = 'en/' + fileName;
      }

      window.location.href = targetPath + search;
    });
  });
});
</script>

</body>
</html>
